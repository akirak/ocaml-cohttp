<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Client (cohttp-eio.Cohttp_eio.Client)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">cohttp-eio</a> &#x00BB; <a href="../index.html">Cohttp_eio</a> &#x00BB; Client</nav><header class="odoc-preamble"><h1>Module <code><span>Cohttp_eio.Client</span></code></h1><p><code>Client</code> is a HTTP/1.1 client.</p></header><nav class="odoc-toc"><ul><li><a href="#generic-http-call">Generic HTTP call</a></li><li><a href="#http-calls-with-body-disallowed">HTTP Calls with Body Disallowed</a></li><li><a href="#http-calls-with-body-allowed">HTTP Calls with Body Allowed</a></li><li><a href="#response-body">Response Body</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-response"><a href="#type-response" class="anchor"></a><code><span><span class="keyword">type</span> response</span><span> = <a href="../../../http/Http/Response/index.html#type-t">Http.Response.t</a> * <span class="xref-unresolved">Eio</span>.Buf_read.t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-host"><a href="#type-host" class="anchor"></a><code><span><span class="keyword">type</span> host</span><span> = string</span></code></div><div class="spec-doc"><p>Represents a server host - as ip address or domain name, e.g. www.example.org:8080, www.reddit.com</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-port"><a href="#type-port" class="anchor"></a><code><span><span class="keyword">type</span> port</span><span> = int</span></code></div><div class="spec-doc"><p>Represents a tcp/ip port value</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-resource_path"><a href="#type-resource_path" class="anchor"></a><code><span><span class="keyword">type</span> resource_path</span><span> = string</span></code></div><div class="spec-doc"><p>Represents HTTP request resource path, e.g. &quot;/shop/purchase&quot;, &quot;/shop/items&quot;, &quot;/shop/categories/&quot; etc.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-env"><a href="#type-env" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a env</span></span><span> = <span>&lt; net : <span class="xref-unresolved">Eio</span>.Net.t.. &gt;</span> <span class="keyword">as</span> 'a</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-body_disallowed_call"><a href="#type-body_disallowed_call" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) body_disallowed_call</span></span><span> =
  <span>?pipeline_requests:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?version:<a href="../../../http/Http/Version/index.html#type-t">Http.Version.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?headers:<a href="../../../http/Http/Header/index.html#type-t">Http.Header.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?conn:<span class="xref-unresolved">Eio</span>.Flow.two_way <span class="keyword">as</span> 'a <span class="arrow">&#45;&gt;</span></span>
  <span>?port:<a href="#type-port">port</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-env">env</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>host:<a href="#type-host">host</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-resource_path">resource_path</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-response">response</a></span></code></div><div class="spec-doc"><p><code>body_disallowed_call</code> denotes HTTP client calls where a request is not allowed to have a request body.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">pipeline_requests</span> <p>If <code>true</code> then attempts to batch multiple client requests to improve request/reponse throughput. Set this to <code>false</code> if you want to improve latency of individual client request/response. Default is <code>false</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-body_allowed_call"><a href="#type-body_allowed_call" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) body_allowed_call</span></span><span> =
  <span>?pipeline_requests:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?version:<a href="../../../http/Http/Version/index.html#type-t">Http.Version.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?headers:<a href="../../../http/Http/Header/index.html#type-t">Http.Header.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?body:<a href="../Body/index.html#type-t">Body.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?conn:<span class="xref-unresolved">Eio</span>.Flow.two_way <span class="keyword">as</span> 'a <span class="arrow">&#45;&gt;</span></span>
  <span>?port:<a href="#type-port">port</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-env">env</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>host:<a href="#type-host">host</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-resource_path">resource_path</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-response">response</a></span></code></div><div class="spec-doc"><p><code>body_allowed_call</code> denotes HTTP client calls where a request can optionally have a request body.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">pipeline_requests</span> <p>If <code>true</code> then attempts to batch multiple client requests to improve request/reponse throughput. Set this to <code>false</code> if you want to improve latency of individual client request/response. Default is <code>false</code>.</p></li></ul></div></div><h2 id="generic-http-call"><a href="#generic-http-call" class="anchor"></a>Generic HTTP call</h2><div class="odoc-spec"><div class="spec value anchored" id="val-call"><a href="#val-call" class="anchor"></a><code><span><span class="keyword">val</span> call : 
  <span>?pipeline_requests:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?meth:<a href="../../../http/Http/Method/index.html#type-t">Http.Method.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?version:<a href="../../../http/Http/Version/index.html#type-t">Http.Version.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?headers:<a href="../../../http/Http/Header/index.html#type-t">Http.Header.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?body:<a href="../Body/index.html#type-t">Body.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?conn:<span class="xref-unresolved">Eio</span>.Flow.two_way <span class="arrow">&#45;&gt;</span></span>
  <span>?port:<a href="#type-port">port</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-env">env</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>host:<a href="#type-host">host</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-resource_path">resource_path</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-response">response</a></span></code></div></div><h2 id="http-calls-with-body-disallowed"><a href="#http-calls-with-body-disallowed" class="anchor"></a>HTTP Calls with Body Disallowed</h2><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-body_disallowed_call">body_disallowed_call</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-head"><a href="#val-head" class="anchor"></a><code><span><span class="keyword">val</span> head : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-body_disallowed_call">body_disallowed_call</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-delete"><a href="#val-delete" class="anchor"></a><code><span><span class="keyword">val</span> delete : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-body_disallowed_call">body_disallowed_call</a></span></span></code></div></div><h2 id="http-calls-with-body-allowed"><a href="#http-calls-with-body-allowed" class="anchor"></a>HTTP Calls with Body Allowed</h2><div class="odoc-spec"><div class="spec value anchored" id="val-post"><a href="#val-post" class="anchor"></a><code><span><span class="keyword">val</span> post : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-body_allowed_call">body_allowed_call</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-put"><a href="#val-put" class="anchor"></a><code><span><span class="keyword">val</span> put : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-body_allowed_call">body_allowed_call</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-patch"><a href="#val-patch" class="anchor"></a><code><span><span class="keyword">val</span> patch : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-body_allowed_call">body_allowed_call</a></span></span></code></div></div><h2 id="response-body"><a href="#response-body" class="anchor"></a>Response Body</h2><div class="odoc-spec"><div class="spec value anchored" id="val-read_fixed"><a href="#val-read_fixed" class="anchor"></a><code><span><span class="keyword">val</span> read_fixed : <span><a href="#type-response">response</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>read_fixed (response,reader)</code> is <code>body_content</code>, where <code>body_content</code> is of length <code>n</code> if &quot;Content-Length&quot; header exists and is a valid integer value <code>n</code> in <code>response</code>. Otherwise <code>body_content</code> holds all bytes until eof.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_chunked"><a href="#val-read_chunked" class="anchor"></a><code><span><span class="keyword">val</span> read_chunked : <span><a href="#type-response">response</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="../Body/index.html#type-chunk">Body.chunk</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../http/Http/Header/index.html#type-t">Http.Header.t</a> option</span></span></code></div><div class="spec-doc"><p><code>read_chunked response chunk_handler</code> is <code>Some updated_headers</code> if &quot;Transfer-Encoding&quot; header value is &quot;chunked&quot; in <code>response</code> and all chunks in <code>reader</code> are read successfully. <code>updated_headers</code> is the updated headers as specified by the chunked encoding algorithm in https: //datatracker.ietf.org/doc/html/rfc7230#section-4.1.3.</p><p><code>reader</code> is updated to reflect the number of bytes read.</p><p>Returns <code>None</code> if <code>Transfer-Encoding</code> header in <code>headers</code> is not specified as &quot;chunked&quot;</p></div></div></div></body></html>